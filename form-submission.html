<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Same head content as before -->
    <style>
        /* Add this new style */
        .admin-only { display: none; }
    </style>
</head>
<body>
    <div class="stats">
        <h2>Your Submissions</h2>
        <div id="userSubmissions"></div>
        <button onclick="logout()" style="background: #dc3545;">Logout</button>
        <a href="admin-dashboard.html" class="admin-only" id="adminLink">Admin Dashboard</a>
    </div>

    <!-- Rest of the form remains the same -->

    <script>
        // Add this at the top
        let currentUser = null;
        let isAdmin = false;

        // Modified auth state listener
        auth.onAuthStateChanged(async user => {
            if (!user) {
                window.location.href = "index.html";
            } else {
                currentUser = user;
                // Check admin status
                const idToken = await user.getIdTokenResult();
                isAdmin = idToken.claims.admin || false;
                
                // Show admin link if admin
                if(isAdmin) document.getElementById('adminLink').style.display = 'inline';
                
                loadUserData();
                updateStatistics();
            }
        });

        // Modified data loading function
        async function loadUserData() {
            let query = db.collection('submissions');
            
            if(!isAdmin) {
                query = query.where('userId', '==', currentUser.uid);
            }

            const snapshot = await query.get();
            const submissions = snapshot.docs.map(doc => doc.data());
            // Render submissions...
        }

        // Rest of the script remains the same
    </script>
</body>
</html>
